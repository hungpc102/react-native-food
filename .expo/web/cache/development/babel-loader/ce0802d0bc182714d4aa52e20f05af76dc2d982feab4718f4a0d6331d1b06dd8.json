{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport { getUserIdToStorage } from \"../../utils/TokenStorage\";\nimport { apiDeleteAllCart } from \"../../api/CartAPI\";\nimport { getAccessTokenFromStorage } from \"../../utils/TokenStorage\";\nimport { handleTokenRefresh } from \"../jwtService/jwtServices\";\nexport var deleteCart = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var callCount = 0;\n    var deleteCartInternal = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        if (callCount < 2) {\n          try {\n            callCount++;\n            var user_id = yield getUserIdToStorage();\n            var accessToken = yield getAccessTokenFromStorage();\n            axios.delete(apiDeleteAllCart + user_id, {\n              headers: {\n                Authorization: `Bearer ${accessToken}`\n              }\n            }).then(function (response) {\n              if (response.data.status === 401) {\n                handleTokenRefresh();\n                deleteCartInternal();\n              } else {\n                console.log('Đã xoá cart');\n              }\n            }).catch(function (error) {\n              console.log(error.message);\n            });\n          } catch (_unused) {}\n        } else {\n          alert('Đăng nhập hết hạn. Vui lòng đăng nhập lại');\n        }\n      });\n      return function deleteCartInternal() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    deleteCartInternal();\n  });\n  return function deleteCart() {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","getUserIdToStorage","apiDeleteAllCart","getAccessTokenFromStorage","handleTokenRefresh","deleteCart","_ref","_asyncToGenerator","callCount","deleteCartInternal","_ref2","user_id","accessToken","delete","headers","Authorization","then","response","data","status","console","log","catch","error","message","_unused","alert","apply","arguments"],"sources":["/Users/chuduchung/Documents/doan-reactnative/react-native-app/react-native-food/services/cartService/deleteAllCart.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { getUserIdToStorage } from \"../../utils/TokenStorage\";\nimport {apiDeleteAllCart} from '../../api/CartAPI'\nimport {getAccessTokenFromStorage} from '../../utils/TokenStorage'\nimport {handleTokenRefresh} from '../jwtService/jwtServices'\n\n\nexport const deleteCart = async()=>{\n    let callCount = 0\n    const deleteCartInternal = async() =>{\n        if(callCount < 2){\n            try{\n                callCount++\n                const user_id = await getUserIdToStorage()\n                const  accessToken = await getAccessTokenFromStorage()\n                \n                axios.delete(apiDeleteAllCart + user_id, {\n                    headers : {\n                        Authorization: `Bearer ${accessToken}`,\n                    }\n                })\n                .then(response => {\n                    if(response.data.status === 401){\n                        handleTokenRefresh()\n                        deleteCartInternal()\n                    }else{\n                        console.log('Đã xoá cart');\n                    }\n                })\n                .catch((error) => { \n                    console.log(error.message)\n                })\n            }\n            catch{\n\n            }\n        }else{\n            alert('Đăng nhập hết hạn. Vui lòng đăng nhập lại')\n        }\n\n    }\n    deleteCartInternal()\n    \n}\n\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,kBAAkB;AAC3B,SAAQC,gBAAgB;AACxB,SAAQC,yBAAyB;AACjC,SAAQC,kBAAkB;AAG1B,OAAO,IAAMC,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAS;IAC/B,IAAIC,SAAS,GAAG,CAAC;IACjB,IAAMC,kBAAkB;MAAA,IAAAC,KAAA,GAAAH,iBAAA,CAAG,aAAU;QACjC,IAAGC,SAAS,GAAG,CAAC,EAAC;UACb,IAAG;YACCA,SAAS,EAAE;YACX,IAAMG,OAAO,SAASV,kBAAkB,CAAC,CAAC;YAC1C,IAAOW,WAAW,SAAST,yBAAyB,CAAC,CAAC;YAEtDH,KAAK,CAACa,MAAM,CAACX,gBAAgB,GAAGS,OAAO,EAAE;cACrCG,OAAO,EAAG;gBACNC,aAAa,EAAG,UAASH,WAAY;cACzC;YACJ,CAAC,CAAC,CACDI,IAAI,CAAC,UAAAC,QAAQ,EAAI;cACd,IAAGA,QAAQ,CAACC,IAAI,CAACC,MAAM,KAAK,GAAG,EAAC;gBAC5Bf,kBAAkB,CAAC,CAAC;gBACpBK,kBAAkB,CAAC,CAAC;cACxB,CAAC,MAAI;gBACDW,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;cAC9B;YACJ,CAAC,CAAC,CACDC,KAAK,CAAC,UAACC,KAAK,EAAK;cACdH,OAAO,CAACC,GAAG,CAACE,KAAK,CAACC,OAAO,CAAC;YAC9B,CAAC,CAAC;UACN,CAAC,CACD,OAAAC,OAAA,EAAK,CAEL;QACJ,CAAC,MAAI;UACDC,KAAK,CAAC,2CAA2C,CAAC;QACtD;MAEJ,CAAC;MAAA,gBA/BKjB,kBAAkBA,CAAA;QAAA,OAAAC,KAAA,CAAAiB,KAAA,OAAAC,SAAA;MAAA;IAAA,GA+BvB;IACDnB,kBAAkB,CAAC,CAAC;EAExB,CAAC;EAAA,gBApCYJ,UAAUA,CAAA;IAAA,OAAAC,IAAA,CAAAqB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAoCtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}