{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport stylesB from \"../assets/css/stylesB\";\nimport axios from 'axios';\nimport { validateEmail, validatePassword } from \"../utils/Validate\";\nimport { userApiRegister } from \"../connect_API/UserAPI\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar RegisterScreen = function RegisterScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    confirmPassword = _useState6[0],\n    setConfirmPassword = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    phone = _useState8[0],\n    setPhone = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    name = _useState10[0],\n    setName = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    loading = _useState12[0],\n    setLoading = _useState12[1];\n  var user = {\n    \"USER_NAME\": name,\n    \"USER_EMAIL\": email,\n    \"USER_PASSWORD\": password,\n    \"USER_PHONE\": phone\n  };\n  var registerUser = function registerUser() {\n    setLoading(true);\n    if (!name || !email || !password || !confirmPassword || !phone) {\n      setLoading(false);\n      alert('Vui lòng điền đầy đủ thông tin.');\n      return;\n    }\n    if (!validateEmail(email)) {\n      setLoading(false);\n      alert('Email không hợp lệ. Vui lòng kiểm tra lại.');\n      return;\n    }\n    if (!validatePassword(password)) {\n      setLoading(false);\n      alert('Mật khẩu phải chứa ít nhất 6 ký tự.');\n      return;\n    }\n    if (confirmPassword !== password) {\n      setLoading(false);\n      alert('Nhập lại mật khẩu không khớp');\n      return;\n    }\n    axios.post(userApiRegister, user).then(function (response) {\n      setLoading(false);\n      alert('Đăng ký thành công');\n      navigation.navigate('Login');\n    }).catch(function (error) {\n      setLoading(false);\n      if (error.response) {\n        var _error$response = error.response,\n          status = _error$response.status,\n          data = _error$response.data;\n        if (status === 400) {\n          alert('Lỗi khi đăng ký 400: ' + data.error);\n        } else if (status === 409) {\n          alert(data.error);\n        } else {\n          alert('Lỗi đăng ký : ' + error.message);\n        }\n      } else if (error.message === 'Network Error') {\n        alert('Không thể kết nối đến máy chủ.');\n      } else {\n        alert('Lỗi : ' + error.message);\n      }\n    });\n  };\n  return _jsxs(View, {\n    style: stylesB.container,\n    children: [_jsx(Text, {\n      style: styles.trademark,\n      children: \"FOODKART\"\n    }), _jsx(Text, {\n      style: styles.textTitle,\n      children: \"Nh\\u1EEFng m\\xF3n \\u0103n ngon \\u0111ang \\u0111\\u1EE3i b\\u1EA1n!\"\n    }), _jsxs(KeyboardAvoidingView, {\n      behavior: \"padding\",\n      children: [_jsx(TextInput, {\n        style: stylesB.textInput,\n        placeholder: \"H\\u1ECD v\\xE0 t\\xEAn\",\n        value: name,\n        onChangeText: function onChangeText(text) {\n          return setName(text);\n        }\n      }), _jsx(TextInput, {\n        value: email,\n        style: stylesB.textInput,\n        placeholder: \"Email\",\n        autoCapitalize: \"none\",\n        onChangeText: function onChangeText(text) {\n          return setEmail(text);\n        }\n      }), _jsx(TextInput, {\n        value: password,\n        style: stylesB.textInput,\n        placeholder: \"M\\u1EADt kh\\u1EA9u\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        }\n      }), _jsx(TextInput, {\n        value: confirmPassword,\n        style: stylesB.textInput,\n        placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          return setConfirmPassword(text);\n        }\n      }), _jsx(TextInput, {\n        style: stylesB.textInput,\n        placeholder: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n        value: phone,\n        onChangeText: function onChangeText(text) {\n          return setPhone(text);\n        }\n      })]\n    }), loading ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"#0000ff\"\n    }) : _jsx(_Fragment, {\n      children: _jsx(TouchableOpacity, {\n        style: stylesB.containerButton,\n        onPress: registerUser,\n        children: _jsx(Text, {\n          style: stylesB.actionButtonText,\n          children: \"\\u0110\\u0103ng k\\xED\"\n        })\n      })\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('HelpPage');\n      },\n      children: _jsx(Text, {\n        style: [stylesB.textDirectional, {\n          marginTop: 50\n        }],\n        children: \"Li\\xEAn h\\u1EC7 \\u0111\\u1EC3 bi\\u1EBFt th\\xEAm\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  trademark: {\n    color: '#F24822',\n    fontSize: 50,\n    fontWeight: '900',\n    marginTop: '20%',\n    marginBottom: 30\n  },\n  textTitle: {\n    fontSize: 18,\n    marginBottom: 50\n  }\n});\nexport default RegisterScreen;","map":{"version":3,"names":["React","useState","View","Text","TextInput","StyleSheet","TouchableOpacity","ActivityIndicator","KeyboardAvoidingView","stylesB","axios","validateEmail","validatePassword","userApiRegister","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterScreen","_ref","navigation","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","confirmPassword","setConfirmPassword","_useState7","_useState8","phone","setPhone","_useState9","_useState10","name","setName","_useState11","_useState12","loading","setLoading","user","registerUser","alert","post","then","response","navigate","catch","error","_error$response","status","data","message","style","container","children","styles","trademark","textTitle","behavior","textInput","placeholder","value","onChangeText","text","autoCapitalize","secureTextEntry","size","color","containerButton","onPress","actionButtonText","textDirectional","marginTop","create","fontSize","fontWeight","marginBottom"],"sources":["/Users/chuduchung/Documents/doan-reactnative/react-native-app/react-native-food/screens/RegisterScreen.tsx"],"sourcesContent":["import React, {useState} from 'react';\nimport { View, Text, TextInput, StyleSheet, TouchableOpacity, ActivityIndicator,Alert ,KeyboardAvoidingView} from 'react-native';\nimport stylesB from '../assets/css/stylesB'\nimport axios from 'axios';\nimport {validateEmail, validatePassword} from '../utils/Validate'\nimport {Props } from '../services/interfaces/navigationTypes';\nimport { userApiRegister } from '../connect_API/UserAPI' \n\n\n\nconst RegisterScreen = ({ navigation }: Props) => {\n  const [email, setEmail] = useState(''); // Khởi tạo state cho email\n  const [password, setPassword] = useState(''); // Khởi tạo state cho password\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [phone, setPhone] = useState('')\n  const [name, setName] = useState('')\n  const [loading, setLoading] = useState(false);\n\n\n  const user = {\n    \"USER_NAME\": name,\n    \"USER_EMAIL\": email,\n    \"USER_PASSWORD\": password,\n    \"USER_PHONE\": phone\n  };\n\n  const registerUser = () => {\n    setLoading(true);\n\n    if (!name || !email || !password || !confirmPassword || !phone) {\n      setLoading(false);\n      alert('Vui lòng điền đầy đủ thông tin.');\n      return;\n    }\n\n    if (!validateEmail(email)) {\n      setLoading(false);\n      alert('Email không hợp lệ. Vui lòng kiểm tra lại.');\n      return;\n    }\n\n    if (!validatePassword(password)) {\n      setLoading(false);\n      alert('Mật khẩu phải chứa ít nhất 6 ký tự.');\n      return;\n    }\n\n    if(confirmPassword !== password){\n      setLoading(false);\n      alert('Nhập lại mật khẩu không khớp');\n      return;\n    }\n\n    axios.post(userApiRegister, user)\n    .then((response) => {\n\n        setLoading(false);\n        alert('Đăng ký thành công');\n        navigation.navigate('Login');\n    })\n    .catch((error) => {\n        setLoading(false);\n          if (error.response) {\n            const { status, data } = error.response;\n            if (status === 400) {\n                alert('Lỗi khi đăng ký 400: ' + data.error);\n            } else if (status === 409) {\n                alert(data.error);\n            } else {\n                alert('Lỗi đăng ký : ' + error.message);\n            }\n          } else if (error.message === 'Network Error') {\n            // Xử lý lỗi mạng\n            alert('Không thể kết nối đến máy chủ.');\n          } else {\n            // Lỗi không xác định\n            alert('Lỗi : ' + error.message);\n        }\n    });\n  };\n\n  \n\n  return (\n    <View  style={stylesB.container}>\n      <Text style={styles.trademark}>FOODKART</Text>\n      <Text style={styles.textTitle}>Những món ăn ngon đang đợi bạn!</Text>\n      <KeyboardAvoidingView behavior='padding'>\n        <TextInput style={stylesB.textInput} placeholder=\"Họ và tên\" value={name}\n        onChangeText={(text) => setName(text)}/>\n        <TextInput value={email} style={stylesB.textInput} placeholder=\"Email\" autoCapitalize='none' \n          onChangeText={(text) => setEmail(text)} />\n        <TextInput value={password} style={stylesB.textInput} placeholder=\"Mật khẩu\" secureTextEntry={true}\n          onChangeText={(text) => setPassword(text)} />\n        <TextInput value={confirmPassword} style={stylesB.textInput} placeholder=\"Nhập lại mật khẩu\" secureTextEntry={true} \n          onChangeText={(text) => setConfirmPassword(text)}/>\n        <TextInput style={stylesB.textInput} placeholder=\"Số điện thoại\" value={phone}\n        onChangeText={(text) => setPhone(text)}/>\n      </KeyboardAvoidingView>\n      \n      {loading ?(\n         <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n      ) : (\n        <>\n          <TouchableOpacity style={stylesB.containerButton} onPress={registerUser}>\n          <Text style={stylesB.actionButtonText}>Đăng kí</Text>\n          </TouchableOpacity>\n        </> \n      )}\n      \n      <TouchableOpacity onPress={() => navigation.navigate('HelpPage')}>\n        <Text style={[stylesB.textDirectional, {marginTop:50}]}>Liên hệ để biết thêm</Text>\n      </TouchableOpacity>\n      \n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  trademark:{\n    color:'#F24822',\n    fontSize:50,\n    fontWeight:'900',\n    marginTop:'20%',\n    marginBottom:30\n  },\n  textTitle:{\n    fontSize:18,\n    marginBottom:50\n  }\n})\nexport default RegisterScreen;"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,QAAQ,QAAO,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,gBAAA;AAAA,OAAAC,iBAAA;AAAA,OAAAC,oBAAA;AAEtC,OAAOC,OAAO;AACd,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,aAAa,EAAEC,gBAAgB;AAEvC,SAASC,eAAe;AAAgC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAIxD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAA8B;EAAA,IAAxBC,UAAU,GAAAD,IAAA,CAAVC,UAAU;EAClC,IAAAC,SAAA,GAA0BtB,QAAQ,CAAC,EAAE,CAAC;IAAAuB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAAgC3B,QAAQ,CAAC,EAAE,CAAC;IAAA4B,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAAG,UAAA,GAA8C/B,QAAQ,CAAC,EAAE,CAAC;IAAAgC,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAnDE,eAAe,GAAAD,UAAA;IAAEE,kBAAkB,GAAAF,UAAA;EAC1C,IAAAG,UAAA,GAA0BnC,QAAQ,CAAC,EAAE,CAAC;IAAAoC,UAAA,GAAAZ,cAAA,CAAAW,UAAA;IAA/BE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EACtB,IAAAG,UAAA,GAAwBvC,QAAQ,CAAC,EAAE,CAAC;IAAAwC,WAAA,GAAAhB,cAAA,CAAAe,UAAA;IAA7BE,IAAI,GAAAD,WAAA;IAAEE,OAAO,GAAAF,WAAA;EACpB,IAAAG,WAAA,GAA8B3C,QAAQ,CAAC,KAAK,CAAC;IAAA4C,WAAA,GAAApB,cAAA,CAAAmB,WAAA;IAAtCE,OAAO,GAAAD,WAAA;IAAEE,UAAU,GAAAF,WAAA;EAG1B,IAAMG,IAAI,GAAG;IACX,WAAW,EAAEN,IAAI;IACjB,YAAY,EAAEhB,KAAK;IACnB,eAAe,EAAEI,QAAQ;IACzB,YAAY,EAAEQ;EAChB,CAAC;EAED,IAAMW,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACzBF,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI,CAACL,IAAI,IAAI,CAAChB,KAAK,IAAI,CAACI,QAAQ,IAAI,CAACI,eAAe,IAAI,CAACI,KAAK,EAAE;MAC9DS,UAAU,CAAC,KAAK,CAAC;MACjBG,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IAEA,IAAI,CAACvC,aAAa,CAACe,KAAK,CAAC,EAAE;MACzBqB,UAAU,CAAC,KAAK,CAAC;MACjBG,KAAK,CAAC,4CAA4C,CAAC;MACnD;IACF;IAEA,IAAI,CAACtC,gBAAgB,CAACkB,QAAQ,CAAC,EAAE;MAC/BiB,UAAU,CAAC,KAAK,CAAC;MACjBG,KAAK,CAAC,qCAAqC,CAAC;MAC5C;IACF;IAEA,IAAGhB,eAAe,KAAKJ,QAAQ,EAAC;MAC9BiB,UAAU,CAAC,KAAK,CAAC;MACjBG,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACF;IAEAxC,KAAK,CAACyC,IAAI,CAACtC,eAAe,EAAEmC,IAAI,CAAC,CAChCI,IAAI,CAAC,UAACC,QAAQ,EAAK;MAEhBN,UAAU,CAAC,KAAK,CAAC;MACjBG,KAAK,CAAC,oBAAoB,CAAC;MAC3B5B,UAAU,CAACgC,QAAQ,CAAC,OAAO,CAAC;IAChC,CAAC,CAAC,CACDC,KAAK,CAAC,UAACC,KAAK,EAAK;MACdT,UAAU,CAAC,KAAK,CAAC;MACf,IAAIS,KAAK,CAACH,QAAQ,EAAE;QAClB,IAAAI,eAAA,GAAyBD,KAAK,CAACH,QAAQ;UAA/BK,MAAM,GAAAD,eAAA,CAANC,MAAM;UAAEC,IAAI,GAAAF,eAAA,CAAJE,IAAI;QACpB,IAAID,MAAM,KAAK,GAAG,EAAE;UAChBR,KAAK,CAAC,uBAAuB,GAAGS,IAAI,CAACH,KAAK,CAAC;QAC/C,CAAC,MAAM,IAAIE,MAAM,KAAK,GAAG,EAAE;UACvBR,KAAK,CAACS,IAAI,CAACH,KAAK,CAAC;QACrB,CAAC,MAAM;UACHN,KAAK,CAAC,gBAAgB,GAAGM,KAAK,CAACI,OAAO,CAAC;QAC3C;MACF,CAAC,MAAM,IAAIJ,KAAK,CAACI,OAAO,KAAK,eAAe,EAAE;QAE5CV,KAAK,CAAC,gCAAgC,CAAC;MACzC,CAAC,MAAM;QAELA,KAAK,CAAC,QAAQ,GAAGM,KAAK,CAACI,OAAO,CAAC;MACnC;IACJ,CAAC,CAAC;EACJ,CAAC;EAID,OACE3C,KAAA,CAACf,IAAI;IAAE2D,KAAK,EAAEpD,OAAO,CAACqD,SAAU;IAAAC,QAAA,GAC9BhD,IAAA,CAACZ,IAAI;MAAC0D,KAAK,EAAEG,MAAM,CAACC,SAAU;MAAAF,QAAA,EAAC;IAAQ,CAAM,CAAC,EAC9ChD,IAAA,CAACZ,IAAI;MAAC0D,KAAK,EAAEG,MAAM,CAACE,SAAU;MAAAH,QAAA,EAAC;IAA+B,CAAM,CAAC,EACrE9C,KAAA,CAACT,oBAAoB;MAAC2D,QAAQ,EAAC,SAAS;MAAAJ,QAAA,GACtChD,IAAA,CAACX,SAAS;QAACyD,KAAK,EAAEpD,OAAO,CAAC2D,SAAU;QAACC,WAAW,EAAC,sBAAW;QAACC,KAAK,EAAE5B,IAAK;QACzE6B,YAAY,EAAE,SAAAA,aAACC,IAAI;UAAA,OAAK7B,OAAO,CAAC6B,IAAI,CAAC;QAAA;MAAC,CAAC,CAAC,EACxCzD,IAAA,CAACX,SAAS;QAACkE,KAAK,EAAE5C,KAAM;QAACmC,KAAK,EAAEpD,OAAO,CAAC2D,SAAU;QAACC,WAAW,EAAC,OAAO;QAACI,cAAc,EAAC,MAAM;QAC1FF,YAAY,EAAE,SAAAA,aAACC,IAAI;UAAA,OAAK7C,QAAQ,CAAC6C,IAAI,CAAC;QAAA;MAAC,CAAE,CAAC,EAC5CzD,IAAA,CAACX,SAAS;QAACkE,KAAK,EAAExC,QAAS;QAAC+B,KAAK,EAAEpD,OAAO,CAAC2D,SAAU;QAACC,WAAW,EAAC,oBAAU;QAACK,eAAe,EAAE,IAAK;QACjGH,YAAY,EAAE,SAAAA,aAACC,IAAI;UAAA,OAAKzC,WAAW,CAACyC,IAAI,CAAC;QAAA;MAAC,CAAE,CAAC,EAC/CzD,IAAA,CAACX,SAAS;QAACkE,KAAK,EAAEpC,eAAgB;QAAC2B,KAAK,EAAEpD,OAAO,CAAC2D,SAAU;QAACC,WAAW,EAAC,uCAAmB;QAACK,eAAe,EAAE,IAAK;QACjHH,YAAY,EAAE,SAAAA,aAACC,IAAI;UAAA,OAAKrC,kBAAkB,CAACqC,IAAI,CAAC;QAAA;MAAC,CAAC,CAAC,EACrDzD,IAAA,CAACX,SAAS;QAACyD,KAAK,EAAEpD,OAAO,CAAC2D,SAAU;QAACC,WAAW,EAAC,mCAAe;QAACC,KAAK,EAAEhC,KAAM;QAC9EiC,YAAY,EAAE,SAAAA,aAACC,IAAI;UAAA,OAAKjC,QAAQ,CAACiC,IAAI,CAAC;QAAA;MAAC,CAAC,CAAC;IAAA,CACrB,CAAC,EAEtB1B,OAAO,GACL/B,IAAA,CAACR,iBAAiB;MAACoE,IAAI,EAAC,OAAO;MAACC,KAAK,EAAC;IAAS,CAAE,CAAC,GAEnD7D,IAAA,CAAAI,SAAA;MAAA4C,QAAA,EACEhD,IAAA,CAACT,gBAAgB;QAACuD,KAAK,EAAEpD,OAAO,CAACoE,eAAgB;QAACC,OAAO,EAAE7B,YAAa;QAAAc,QAAA,EACxEhD,IAAA,CAACZ,IAAI;UAAC0D,KAAK,EAAEpD,OAAO,CAACsE,gBAAiB;UAAAhB,QAAA,EAAC;QAAO,CAAM;MAAC,CACnC;IAAC,CACnB,CACH,EAEDhD,IAAA,CAACT,gBAAgB;MAACwE,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAMxD,UAAU,CAACgC,QAAQ,CAAC,UAAU,CAAC;MAAA,CAAC;MAAAS,QAAA,EAC/DhD,IAAA,CAACZ,IAAI;QAAC0D,KAAK,EAAE,CAACpD,OAAO,CAACuE,eAAe,EAAE;UAACC,SAAS,EAAC;QAAE,CAAC,CAAE;QAAAlB,QAAA,EAAC;MAAoB,CAAM;IAAC,CACnE,CAAC;EAAA,CAEf,CAAC;AAEX,CAAC;AAED,IAAMC,MAAM,GAAG3D,UAAU,CAAC6E,MAAM,CAAC;EAC/BjB,SAAS,EAAC;IACRW,KAAK,EAAC,SAAS;IACfO,QAAQ,EAAC,EAAE;IACXC,UAAU,EAAC,KAAK;IAChBH,SAAS,EAAC,KAAK;IACfI,YAAY,EAAC;EACf,CAAC;EACDnB,SAAS,EAAC;IACRiB,QAAQ,EAAC,EAAE;IACXE,YAAY,EAAC;EACf;AACF,CAAC,CAAC;AACF,eAAejE,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}